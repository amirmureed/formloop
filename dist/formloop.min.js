(function(C){const s={init(a,w={}){const y=[...a.querySelectorAll('[data-form="step"]')];let n=0;const h=e=>{y.forEach((t,r)=>{t.style.display=r===e?"block":"none"})},p=()=>{const e=y[n],t=e.querySelectorAll("input, select, textarea"),r=(a.getAttribute("data-validation-mode")||"native").toLowerCase();let c=!0,i=null;t.forEach(o=>{o.classList.remove("formloop-error"),o.removeAttribute("aria-invalid")}),e.querySelectorAll('[data-validation="error"]').forEach(o=>o.style.display="none");const v=new Set,k=(o,f)=>{c=!1,i||(i=o),r==="custom"&&(f&&(f.style.display="block"),o.classList.add("formloop-error"),o.setAttribute("aria-invalid","true"))};return t.forEach(o=>{const f=(o.type||"").toLowerCase(),l=o.name||"",S=l||o.id||"",b=S?`[data-validation="error"][data-for="${CSS.escape(S)}"]`:null,x=b?e.querySelector(b):null;if(f==="checkbox"&&l){const u=e.querySelectorAll(`input[type="checkbox"][name="${CSS.escape(l)}"]`);if(u.length>1){if(v.has(l))return;v.add(l);const A=Array.from(u).filter(V=>V.checked).length===1;u[0].setCustomValidity(A?"":"Please select exactly one option."),A||k(u[0],x);return}}o.checkValidity()||k(o,x)}),c?!0:(r==="native"?i&&typeof i.reportValidity=="function"?i.reportValidity():typeof a.reportValidity=="function"&&a.reportValidity():i&&i.focus(),!1)},q=a.querySelectorAll('[data-form="next-btn"]'),L=a.querySelectorAll('[data-form="back-btn"]'),m=a.querySelector('[data-form="submit-btn"]');q.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),p()&&(n=Math.min(n+1,y.length-1),h(n))})}),L.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),n=Math.max(n-1,0),h(n)})}),m&&m.addEventListener("click",e=>{a.checkValidity()||(e.preventDefault(),p())}),h(n);const E=a.querySelectorAll('input[type="checkbox"][name]'),d=new Map;E.forEach(e=>{const t=e.name;d.has(t)||d.set(t,[]),d.get(t).push(e)}),d.forEach(e=>{e.length>1&&e.forEach(t=>{t.addEventListener("change",()=>{t.checked&&e.forEach(c=>{c!==t&&(c.checked=!1)});const r=e.filter(c=>c.checked).length===1;e[0].setCustomValidity(r?"":"Please select exactly one option.")})})})},autoInit(){document.querySelectorAll('[data-form="multi-step"]').forEach(a=>{s.init(a)})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>s.autoInit()):s.autoInit(),C.Formloop=s})(window);
